<!DOCTYPE html><html lang="my" data-theme="dark"><head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<title>Textile Calc Pro</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">

<script>
(function(){document.documentElement.setAttribute('data-theme',localStorage.getItem('textile-theme')||'dark')})();
</script>

<style>
:root,[data-theme="dark"]{--bg:#000;--text-bright:#fff;--warn:#ff3b30;--unit-color:rgba(255,255,255,0.5);--market-color:#00ff88}[data-theme="light"]{--bg:#fff;--text-bright:#000;--unit-color:rgba(0,0,0,0.4);--market-color:#008f4c}*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;user-select:none}input{-webkit-user-select:text;user-select:text}html{background-color:var(--bg);transition:background-color .3s}

body{
  background-color:var(--bg);
  color:var(--text-bright);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  margin:0;
  height:100vh;
  display:flex;
  flex-direction:column;
  overflow:hidden
}

/* --- Fixed Ad Spaces (Appilix Ready) --- */
.top-ad-space, .bottom-ad-space {
  height: 60px; width: 100%; background: transparent;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; z-index: 100;
}
.bottom-ad-space { border-top: 0.5px solid rgba(255,255,255,0.1); }
.top-ad-space { border-bottom: 0.5px solid rgba(255,255,255,0.1); }

/* Splash */
#splash-screen{position:fixed;top:0;left:0;width:100%;height:100%;background-color:var(--bg);display:flex;justify-content:center;align-items:center;z-index:30000;transition:opacity .8s,visibility .8s}#splash-text{font-size:1.5rem;font-weight:900;letter-spacing:4px;opacity:0;animation:f 2.2s forwards}@keyframes f{0%{opacity:0;transform:translateY(10px)}30%,70%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-10px)}}.hide-splash{opacity:0;visibility:hidden;pointer-events:none}

/* Header & Results */
.app-header{flex-shrink:0;z-index:500;background-color:var(--bg);padding:10px 0}
#app-title{padding:10px 25px;font-size:1.1rem;font-weight:900}
.header-results{padding:10px 25px}
.total-box{margin-bottom:10px}.total-label{font-size:.7rem;font-weight:600;opacity:.8;display:block}.total-val{font-size:3.2rem;font-weight:900;line-height:1;transition:opacity .4s}.sub-res-row{display:flex;justify-content:space-between;margin-top:10px}.res-item{flex:1}.res-label{font-size:.7rem;font-weight:600;opacity:.8;display:block}.res-val{font-size:1.4rem;font-weight:800;transition:opacity .4s}#gsm-sign{font-size:.75rem;font-weight:600;margin-left:8px;opacity:.7}

.theme-btn, .calc-trigger, .reset-btn, .calc-b, .row, .market-i { 
  transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  cursor: pointer;
}
.theme-btn:active, .calc-trigger:active, .reset-btn:active, .calc-b:active, .row:active, .market-i:active { 
  transform: scale(0.94);
  opacity: 0.8;
}

.header-actions{position:fixed;top:75px;right:25px;display:flex;flex-direction:column;gap:12px;z-index:18000;align-items:flex-end}
.theme-btn, .calc-trigger { background: 0 0; border: none; color: var(--text-bright); font-size: .75rem; font-weight: 700; }

/* Main Content */
.main-content{padding:0 25px;flex:1;overflow-y:auto;padding-top:15px}
.row{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px; padding: 5px; border-radius: 8px;}
.label-group{cursor:pointer; flex: 1;}.label-mm{font-size:1rem;font-weight:700;display:block}.label-en{font-size:.7rem;text-transform:uppercase;font-weight:600;opacity:.5}.input-group{width:55%;display:flex;align-items:baseline;justify-content:flex-end;position:relative}
input{background:0 0;border:none;color:var(--text-bright);font-size:1.7rem;font-weight:800;text-align:right;outline:0;width:65%;padding:0}
.unit-tag{font-size:.65rem;font-weight:700;color:var(--unit-color);margin-left:6px;display:none;line-height:1.2;text-align:left;min-width:65px}.show-unit{display:inline-block}.market-i{position:absolute;right:-15px;top:-10px;font-style:normal;font-size:.7rem;border:1px solid var(--unit-color);border-radius:50%;padding:0 5px;opacity:0}.show-i{opacity:.7}.market-active{color:var(--market-color)!important}

/* --- Calculator Overlay --- */
#calc-overlay{
  position:fixed; top:60px; bottom:60px; left:0; width:100%; 
  background:var(--bg); z-index:15000; display:none; 
  flex-direction:column; padding:20px;
}
.calc-screen{flex:1;display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;padding:20px 75px 20px 10px}
#calc-history{font-size:1.2rem;opacity:.5;margin-bottom:5px;min-height:1.4rem;word-break:break-all}
#cs{font-size:4.5rem;font-weight:300}.calc-btns{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:20px}
.calc-b{height:75px;font-size:2rem;display:flex;align-items:center;justify-content:center; background:transparent; border:none; color:inherit;}
.calc-op{color:#ff9f0a;font-weight:600;font-size:2.2rem}.calc-func{color:#a5a5a5;font-size:1.5rem}

.fade-out { opacity: 0; transition: opacity 0.4s; }
</style>

</head>
<body>

<div class="top-ad-space" id="top-ad"></div>

<div id="splash-screen"><div id="splash-text">TEXTILE CALC</div></div>

<div class="header-actions">
  <button class="theme-btn" onclick="toggleTheme()">THEME</button>
  <button class="calc-trigger" id="calc-master-btn" onclick="toggleCalc()">CALCULATOR</button>
</div>

<div class="app-header">
  <div id="app-title">TEXTILE CALC</div>
  <div class="header-results">
    <div class="total-box">
      <span class="total-label">GRAND TOTAL (စုစုပေါင်းကျသင့်ငွေ)</span>
      <span class="total-val" id="total-res">0</span>
    </div>
    <div class="sub-res-row">
      <div class="res-item">
        <span class="res-label">၁ ကီလို ထွက်ကိုက် (YIELD)</span>
        <span class="res-val" id="yield-res">0.00</span>
      </div>
      <div class="res-item" style="text-align:right">
        <span class="res-label">GSM</span>
        <span class="res-val"><span id="gsm-res">0</span><span id="gsm-sign"></span></span>
      </div>
    </div>
    <div style="margin-top: 15px;">
      <button class="reset-btn" onclick="resetAll()" style="color:var(--warn);font-weight:900;font-size:0.75rem;padding:0; background:transparent; border:none;">အားလုံးဖျက်မည် (RESET ALL)</button>
    </div>
  </div>
</div>

<div class="main-content">
  <div class="row" onclick="document.getElementById('kg').focus()">
    <div class="label-group"><span class="label-mm">အလိပ် ကီလို</span><span class="label-en">Roll Weight</span></div>
    <div class="input-group"><input type="number" id="kg" placeholder="0"><span class="unit-tag" id="unit-kg">KG<br>ကီလို</span></div>
  </div>
  <div class="row" onclick="toggleUnit()">
    <div class="label-group"><span class="label-mm" id="u-mm">အလိပ် ကိုက်</span><span class="label-en" id="u-en">Roll Yards</span></div>
    <div class="input-group">
      <i class="market-i" id="market-i" onmousedown="holdMarket(true)" onmouseup="holdMarket(false)" ontouchstart="holdMarket(true)" ontouchend="holdMarket(false)" onclick="event.stopPropagation()">i</i>
      <input type="number" id="u-val" placeholder="0" onclick="event.stopPropagation()">
      <span class="unit-tag" id="unit-u">YD<br>ကိုက်</span>
    </div>
  </div>
  <div class="row" onclick="document.getElementById('width').focus()">
    <div class="label-group"><span class="label-mm">အလိပ် အနံ</span><span class="label-en">Fabric Width</span></div>
    <div class="input-group"><input type="number" id="width" placeholder="0"><span class="unit-tag" id="unit-width">INCH<br>လက်မ</span></div>
  </div>
  <div class="row">
    <div class="label-group">
      <input type="number" id="yd_v" value="1" style="width:30px;font-size:1.1rem;text-align:left;float:left;margin-right:8px;font-weight:800;color:var(--text-bright);background:0;border:0;margin-top:2px">
      <span class="label-mm">ကိုက်ကီလို</span><span class="label-en">Yards per KG</span>
    </div>
    <div class="input-group"><input type="number" id="yd_k" placeholder="0.00"><span class="unit-tag" id="unit-ratio">KG<br>ကီလို</span></div>
  </div>
  <div class="row" onclick="document.getElementById('p_y').focus()">
    <div class="label-group"><span class="label-mm">၁ ကိုက် ဈေးနှုန်း</span><span class="label-en">Price Per Yard</span></div>
    <div class="input-group"><input type="number" id="p_y" placeholder="0"><span class="unit-tag" id="unit-py">Ks<br>ကျပ်</span></div>
  </div>
  <div class="row" onclick="document.getElementById('p_k').focus()">
    <div class="label-group"><span class="label-mm">၁ ကီလို ဈေးနှုန်း</span><span class="label-en">Price Per KG</span></div>
    <div class="input-group"><input type="number" id="p_k" placeholder="0"><span class="unit-tag" id="unit-pk">Ks<br>ကျပ်</span></div>
  </div>
  <div style="height:30px"></div>
</div>

<div class="bottom-ad-space" id="bottom-ad"></div>

<div id="calc-overlay">
  <div class="calc-screen"><div id="calc-history"></div><div id="cs">0</div></div>
  <div class="calc-btns">
    <button class="calc-b calc-func" onclick="cl()">AC</button><button class="calc-b calc-func" onclick="del()">⌫</button><button class="calc-b calc-func" onclick="op('%')">%</button><button class="calc-b calc-op" onclick="op('/')">÷</button>
    <button class="calc-b" onclick="nm('7')">7</button><button class="calc-b" onclick="nm('8')">8</button><button class="calc-b" onclick="nm('9')">9</button><button class="calc-b calc-op" onclick="op('*')">×</button>
    <button class="calc-b" onclick="nm('4')">4</button><button class="calc-b" onclick="nm('5')">5</button><button class="calc-b" onclick="nm('6')">6</button><button class="calc-b calc-op" onclick="op('-')">−</button>
    <button class="calc-b" onclick="nm('1')">1</button><button class="calc-b" onclick="nm('2')">2</button><button class="calc-b" onclick="nm('3')">3</button><button class="calc-b calc-op" onclick="op('+')">+</button>
    <button class="calc-b" onclick="nm('0')">0</button><button class="calc-b" onclick="nm('00')">00</button><button class="calc-b" onclick="nm('.')">.</button><button class="calc-b calc-op" onclick="eq()">=</button>
  </div>
</div>

<script>
setTimeout(()=>document.getElementById('splash-screen').classList.add('hide-splash'),2200);
let q=!1; function toggleCalc(){ const e=document.getElementById('calc-overlay'),t=document.getElementById('calc-master-btn'); q=!q; e.style.display=q?'flex':'none'; t.innerText=q?"BACK":"CALCULATOR"; t.style.color=q?"var(--warn)":"var(--text-bright)"; if (navigator.vibrate) navigator.vibrate(40); }
function toggleTheme(){ const e=document.documentElement,t=e.getAttribute('data-theme')==='light'?'dark':'light'; e.setAttribute('data-theme',t); localStorage.setItem('textile-theme',t); if (navigator.vibrate) navigator.vibrate(40); }

let u=!0,f=0,l='',t=0;function holdMarket(e){const n=document.getElementById('u-val');if(e){t=parseFloat(n.value)||0;n.value=((u?t/1.0936:t)*1.1).toFixed(2);n.classList.add('market-active')}else{n.value=t?t.toFixed(2):'';n.classList.remove('market-active')}}function toggleUnit(){clearSecondary();const e=document.getElementById('u-mm'),n=document.getElementById('u-en'),o=document.getElementById('u-val'),i=document.getElementById('unit-u');let s=parseFloat(o.value)||0;if(u){e.innerText="အလိပ် မီတာ";n.innerText="Roll Meters";i.innerHTML="M<br>မီတာ";if(s>0)o.value=(s*.9144).toFixed(2)}else{e.innerText="အလိပ် ကိုက်";n.innerText="Roll Yards";i.innerHTML="YD<br>ကိုက်";if(s>0)o.value=(s/.9144).toFixed(2)}u=!u;runCalc('u-val')}function clearSecondary(){['width','p_y','p_k'].forEach(e=>document.getElementById(e).value='');document.querySelectorAll('.unit-tag').forEach(e=>{if(['unit-width','unit-py','unit-pk'].includes(e.id))e.classList.remove('show-unit')})}const inputs=document.querySelectorAll('.main-content input');inputs.forEach(e=>e.addEventListener('input',t=>{const n=document.getElementById('kg'),o=document.getElementById('u-val');if(t.target.id==='yd_k'&&n.value===''&&o.value===''){l='yd_k';n.readOnly=!0;o.readOnly=!0;document.getElementById('p_y').value='';document.getElementById('p_k').value='';document.querySelectorAll('.unit-tag').forEach(e=>{if(['unit-py','unit-pk'].includes(e.id))e.classList.remove('show-unit')})}if(t.target.id==='yd_v'){updateRatioOnly();return}if(['kg','u-val'].includes(t.target.id))clearSecondary();if(l===''&&t.target.id!=='yd_v')l=t.target.id;const i=t.target.parentElement.querySelector('.unit-tag');if(i)t.target.value.length>0?i.classList.add('show-unit'):i.classList.remove('show-unit');runCalc(t.target.id)}));function updateRatioOnly(){let e=parseFloat(document.getElementById('yd_v').value)||0;if(f>0&&e>0){document.getElementById('yd_k').value=(e/f).toFixed(2);document.getElementById('unit-ratio').classList.add('show-unit')}}function runCalc(e){let n=document.getElementById('kg'),o=document.getElementById('u-val'),i=document.getElementById('yd_k'),s=document.getElementById('yd_v'),a=parseFloat(n.value)||0,r=parseFloat(document.getElementById('width').value)||0,c=parseFloat(o.value)||0,d=parseFloat(s.value)||1,g=parseFloat(i.value)||0,m=parseFloat(document.getElementById('p_y').value)||0,p=parseFloat(document.getElementById('p_k').value)||0;const h=document.getElementById('market-i');if(u&&c>0)h.classList.add('show-i');else h.classList.remove('show-i');let y=u?c:c/.9144;if(e==='yd_k'&&g>0){f=d/g;if(l==='u-val'&&y>0){a=y/f;n.value=a.toFixed(2);document.getElementById('unit-kg').classList.add('show-unit')}else if(l==='kg'&&a>0){let e=f*a;o.value=u?e.toFixed(2):(e*.9144).toFixed(2);document.getElementById('unit-u').classList.add('show-unit')}}else if(a>0&&y>0){f=y/a;i.value=(d/f).toFixed(2);document.getElementById('unit-ratio').classList.add('show-unit')}if(f>0){if(e==='p_y'){p=m*f;document.getElementById('p_k').value=Math.round(p);document.getElementById('unit-pk').classList.add('show-unit')}else if(e==='p_k'){m=p/f;document.getElementById('p_y').value=Math.round(m);document.getElementById('unit-py').classList.add('show-unit')}}let v=f>0&&r>0?1000*1.0936/(f*r*.0254):0;document.getElementById('yield-res').innerText=f>0?f.toFixed(2):"0.00";document.getElementById('total-res').innerText=a>0&&p>0?Math.round(a*p).toLocaleString():"0";document.getElementById('gsm-res').innerText=v>0?Math.round(v):"0";const x=document.getElementById('gsm-sign');if(v>0){let e=Math.round(v);x.innerText=e<110?"- အလွန်ပါး":e<160?"- ပါး":e<220?"- အလတ်":e<300?"- ထူ":"- အလွန်ထူ"}else x.innerText=""}function resetAll(){if (navigator.vibrate) navigator.vibrate(100); const e=[document.getElementById('yield-res'),document.getElementById('gsm-res'),document.getElementById('total-res'),document.getElementById('gsm-sign')];inputs.forEach(el=>{if(el.value&&el.id!=='yd_v')el.classList.add('fade-out')});e.forEach(el=>el.classList.add('fade-out'));setTimeout(()=>{inputs.forEach(el=>{el.id==='yd_v'?el.value=1:el.value='';el.readOnly=!1;el.classList.remove('fade-out')});document.querySelectorAll('.unit-tag').forEach(el=>el.classList.remove('show-unit'));document.getElementById('market-i').classList.remove('show-i');l='';f=0;document.getElementById('yield-res').innerText="0.00";document.getElementById('gsm-res').innerText="0";document.getElementById('gsm-sign').innerText="";document.getElementById('total-res').innerText="0";e.forEach(el=>el.classList.remove('fade-out'))},400)}

/* --- Calculator Logic --- */
const scr=document.getElementById('cs'),hist=document.getElementById('calc-history');let cV='0',pV='',cO=null,wN=!1;
function nm(e){if (navigator.vibrate) navigator.vibrate(20); if(wN){cV=e;wN=!1}else cV=cV==='0'?e:cV+e;scr.innerText=cV.substring(0,12)}
function del(){if (navigator.vibrate) navigator.vibrate(30); cV=cV.length>1?cV.slice(0,-1):'0';scr.innerText=cV}
function cl(){if (navigator.vibrate) navigator.vibrate(40); cV='0',pV='',cO=null,scr.innerText='0',hist.innerText=''}
function op(e){if (navigator.vibrate) navigator.vibrate(30); const t=parseFloat(cV); if(cO&&!wN){eq()} pV=parseFloat(cV); cO=e; wN=!0; hist.innerText=pV+" "+cO;}
function eq(){if(!cO)return; if (navigator.vibrate) navigator.vibrate(50); let t=parseFloat(cV); let res=pf(pV,t,cO); hist.innerText=pV+" "+cO+" "+t+" ="; cV=String(res); scr.innerText=cV.substring(0,12); cO=null; wN=!0;}
function pf(e,t,n){return n==='+'?e+t:n==='-'?e-t:n==='*'?e*t:n==='/'?e/t:n==='%'?e*t/100:t}
</script>
</body></html>
